/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojpagingtabledatasource"],function(b){b.bi=function(b,a){this.wE=b;this.Cm=a};o_("PagingCellSet",b.bi,b);b.bi.prototype.getData=function(b){return this.wE.getData({column:b.column,row:b.row+this.Cm})};b.b.g("PagingCellSet.prototype.getData",{getData:b.bi.prototype.getData});b.bi.prototype.getMetadata=function(b){return this.wE.getMetadata({column:b.column,row:b.row+this.Cm})};b.b.g("PagingCellSet.prototype.getMetadata",{getMetadata:b.bi.prototype.getMetadata});b.bi.prototype.R=
function(b){return this.wE.R(b)};b.b.g("PagingCellSet.prototype.getCount",{R:b.bi.prototype.R});b.bi.prototype.N2=function(){return this.wE};b.b.g("PagingCellSet.prototype.getCellSet",{N2:b.bi.prototype.N2});b.bi.prototype.Iy=function(){return this.Cm};b.b.g("PagingCellSet.prototype.getStartIndex",{Iy:b.bi.prototype.Iy});b.Ka=function(f){if(!(f instanceof b.Wm))throw new b.X("Not a datagridatasource","Not a datagridatasource",b.X.Tb.ERROR);this.tc=f;this.$=0;this.Init()};o_("PagingDataGridDataSource",
b.Ka,b);b.b.ga(b.Ka,b.Wm,"oj.PagingDataGridDataSource");b.Ka.prototype.Init=function(){b.Ka.q.Init.call(this);this.Ox()};b.b.g("PagingDataGridDataSource.prototype.Init",{Init:b.Ka.prototype.Init});b.Ka.prototype.Ox=function(){this.tc.on("change",this.Xea.bind(this))};b.Ka.prototype.getPage=function(){return this.Lc};b.b.g("PagingDataGridDataSource.prototype.getPage",{getPage:b.Ka.prototype.getPage});b.Ka.prototype.setPage=function(f,a){a=a||{};f=parseInt(f,10);try{b.Ka.q.handleEvent.call(this,b.bc.D.BEFOREPAGE,
{page:f,previousPage:this.Lc})}catch(d){return Promise.reject(null)}this.La=null!=a.pageSize?a.pageSize:this.La;a.startIndex=f*this.La;var c=this.Lc;this.Lc=f;this.$=a.startIndex;var e=this;return new Promise(function(b,d){e.He(a).then(function(){b(null)},function(){e.Lc=c;e.$=e.Lc*e.La;d(null)})})};b.b.g("PagingDataGridDataSource.prototype.setPage",{setPage:b.Ka.prototype.setPage});b.Ka.prototype.He=function(b){this.Tl=!0;this.$=b.startIndex;var a=this;return new Promise(function(b){a.handleEvent("change",
{operation:"sync",pageSize:a.La});b(void 0)})};b.Ka.prototype.fetch=function(b){this.La=b.pageSize+b.startIndex;b.startIndex=0;return this.He(b)};b.b.g("PagingDataGridDataSource.prototype.fetch",{fetch:b.Ka.prototype.fetch});b.Ka.prototype.getStartItemIndex=function(){return this.$};b.b.g("PagingDataGridDataSource.prototype.getStartItemIndex",{getStartItemIndex:b.Ka.prototype.getStartItemIndex});b.Ka.prototype.getEndItemIndex=function(){return this.si};b.b.g("PagingDataGridDataSource.prototype.getEndItemIndex",
{getEndItemIndex:b.Ka.prototype.getEndItemIndex});b.Ka.prototype.getPageCount=function(){var b=this.totalSize();return-1==b?-1:Math.ceil(b/this.La)};b.b.g("PagingDataGridDataSource.prototype.getPageCount",{getPageCount:b.Ka.prototype.getPageCount});b.Ka.prototype.Xea=function(f){switch(f.operation){case "refresh":this.$=0;this.handleEvent("change",{operation:"sync",pageSize:this.La});this.handleEvent(b.ka.D.REFRESH,null);break;case "reset":this.handleEvent(b.ka.D.RESET,null);break;case "insert":this.handleEvent(b.ka.D.ADD,
{index:f.indexes.row});break;case "delete":this.handleEvent(b.ka.D.REMOVE,null);break;case "update":f.indexes.row=0<=f.indexes.row-this.$?f.indexes.row-this.$:-1;this.handleEvent("change",f);break;default:this.handleEvent("change",f),this.handleEvent(b.ka.D.SYNC,null)}};b.Ka.prototype.R=function(b){var a=this.tc.R(b);return"row"===b&&0<=a?this.$+this.La<a?this.La:a-this.$:a};b.b.g("PagingDataGridDataSource.prototype.getCount",{R:b.Ka.prototype.R});b.Ka.prototype.yg=function(b){return this.tc.yg(b)};
b.b.g("PagingDataGridDataSource.prototype.getCountPrecision",{yg:b.Ka.prototype.yg});b.Ka.prototype.Lf=function(f,a,d){var c;null==this.Tl?(c=new b.Fd(0,0,f.axis,null),null!=a&&a.success&&a.success.call(d.success,c,f)):"row"===f.axis?(f.start+=this.$,f.start+f.count>this.$+this.La&&(f.count=this.La-f.start),this.Vt={callbacks:a,callbackObjects:d},this.tc.Lf(f,{success:this.$J.bind(this),error:this.Yfa.bind(this)},d)):this.tc.Lf(f,a,d)};b.b.g("PagingDataGridDataSource.prototype.fetchHeaders",{Lf:b.Ka.prototype.Lf});
b.Ka.prototype.$J=function(f,a){var d,c,e;a.start-=this.$;a.count+=1;d=new b.Be(f,this.$);c=this.Vt.callbacks.success;e=this.Vt.callbackObjects.success;this.Vt=null;c.call(e,d,a)};b.Ka.prototype.Yfa=function(b){var a,d;a=this.Vt.callbacks.error;d=this.Vt.callbackObjects.error;this.Vt=null;a.call(d,b)};b.Ka.prototype.xg=function(f,a,d){var c;if(null==this.Tl)c=new b.Yf(0,0,0,0,null),null!=a&&a.success&&a.success.call(d.success,c,f);else{for(c=0;c<f.length;c+=1)"row"===f[c].axis&&(f[c].start+=this.$,
f[c].start+f[c].count>this.$+this.La&&(f[c].count=this.La-f[c].start));this.Tt={callbacks:a,callbackObjects:d};this.tc.xg(f,{success:this.Wea.bind(this),error:this.Vea.bind(this)},d)}};b.b.g("PagingDataGridDataSource.prototype.fetchCells",{xg:b.Ka.prototype.xg});b.Ka.prototype.Wea=function(f,a){var d,c,e;for(d=0;d<a.length;d+=1)"row"===a[d].axis&&(a[d].start-=this.$,a[d].count+=1);d=new b.bi(f,this.$);c=this.Tt.callbacks.success;e=this.Tt.callbackObjects.success;this.Tt=null;this.si=this.$+f.R("row")-
1;this.handleEvent("sync",{data:Array(f.R("row")),startIndex:this.$});c.call(e,d,a)};b.Ka.prototype.Vea=function(b){var a,d;a=this.Tt.callbacks.error;d=this.Tt.callbackObjects.error;this.Tt=null;a.call(d,b)};b.Ka.prototype.keys=function(b){return this.tc.keys({column:b.column,row:b.row+this.$})};b.b.g("PagingDataGridDataSource.prototype.keys",{keys:b.Ka.prototype.keys});b.Ka.prototype.Dg=function(b){b=this.tc.Dg(b);-1!=b.row&&(b.row-=this.$);return b};b.b.g("PagingDataGridDataSource.prototype.indexes",
{Dg:b.Ka.prototype.Dg});b.Ka.prototype.getCapability=function(b){return this.tc.getCapability(b)};b.b.g("PagingDataGridDataSource.prototype.getCapability",{getCapability:b.Ka.prototype.getCapability});b.Ka.prototype.size=function(){var b;if(null==this.Tl)return-1;b=this.tc.R("row");return this.tc.R("row")>this.La?this.La:b};b.b.g("PagingDataGridDataSource.prototype.size",{size:b.Ka.prototype.size});b.Ka.prototype.sort=function(b,a,d){this.tc.sort(b,a,d)};b.b.g("PagingDataGridDataSource.prototype.sort",
{sort:b.Ka.prototype.sort});b.Ka.prototype.totalSize=function(){return null==this.Tl?-1:this.tc.R("row")};b.b.g("PagingDataGridDataSource.prototype.totalSize",{totalSize:b.Ka.prototype.totalSize});b.Ka.prototype.totalSizeConfidence=function(){return"actual"};b.b.g("PagingDataGridDataSource.prototype.totalSizeConfidence",{totalSizeConfidence:b.Ka.prototype.totalSizeConfidence});b.Ka.prototype.pd=function(b,a,d){return this.tc.pd(b,a,d)};b.b.g("PagingDataGridDataSource.prototype.moveOK",{pd:b.Ka.prototype.pd});
b.Ka.prototype.move=function(b,a,d,c,e){this.tc.move(b,a,d,c,e)};b.b.g("PagingDataGridDataSource.prototype.move",{move:b.Ka.prototype.move});b.Be=function(b,a){this.sr=b;this.Cm=a};o_("PagingHeaderSet",b.Be,b);b.Be.prototype.getData=function(b,a){return this.sr.getData(b+this.Cm,a)};b.b.g("PagingHeaderSet.prototype.getData",{getData:b.Be.prototype.getData});b.Be.prototype.getMetadata=function(b,a){return this.sr.getMetadata(b+this.Cm,a)};b.b.g("PagingHeaderSet.prototype.getMetadata",{getMetadata:b.Be.prototype.getMetadata});
b.Be.prototype.R=function(){return this.sr.R()};b.b.g("PagingHeaderSet.prototype.getCount",{R:b.Be.prototype.R});b.Be.prototype.Ag=function(){return this.sr.Ag()};b.b.g("PagingHeaderSet.prototype.getLevelCount",{Ag:b.Be.prototype.Ag});b.Be.prototype.Vb=function(b,a){return this.sr.Vb(b+this.Cm,a)};b.b.g("PagingHeaderSet.prototype.getExtent",{Vb:b.Be.prototype.Vb});b.Be.prototype.me=function(b,a){return this.sr.me(b+this.Cm,a)};b.b.g("PagingHeaderSet.prototype.getDepth",{me:b.Be.prototype.me});b.Be.prototype.d3=
function(){return this.sr};b.b.g("PagingHeaderSet.prototype.getHeaderSet",{d3:b.Be.prototype.d3});b.Be.prototype.Iy=function(){return this.Cm};b.b.g("PagingHeaderSet.prototype.getStartIndex",{Iy:b.Be.prototype.Iy})});