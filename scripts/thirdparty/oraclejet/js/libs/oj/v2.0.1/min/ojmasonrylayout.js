/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd"],function(b,f){function a(b,c,e,f,h,k){null==a.bH&&(a.bH=a.gda());this.qc=b;this.yj=c;this.R$=e;f&&f.N5&&(this.bma=f.N5);h&&(h.Q5&&(this.tM=h.Q5),h.P5&&(this.sM=h.P5),h.U5&&(this.yM=h.U5),h.T5&&(this.xM=h.T5),h.R5&&(this.vM=h.R5),h.S5&&(this.xD=h.S5),h.W5&&(this.AM=h.W5),h.X5&&(this.BM=h.X5),h.V5&&(this.zM=h.V5));k&&(k.G1&&(this.zn=k.G1),k.d5&&(this.kh=k.d5),k.u3&&(this.VW=k.u3),k.D3&&(this.HJ=k.D3),k.z5&&(this.so=k.z5),k.P3&&(this.zt=k.P3),
k.m4&&(this.Mt=k.m4),k.l4&&(this.Bk=k.l4),k.k4&&(this.eo=k.k4),k.B5&&(this.Xx=k.B5),k.df&&(this.S0=k.df),k.Lg&&(this.T0=k.Lg));c=document.createElement("div");e=c.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";c.appendChild(f);b.insertBefore(c,b.firstChild);this.H0=c;this.Qq=f;var l=this;this.xk=function(a){l.vq(a)};this.MX=function(){l.oga()};this.sq=function(a){l.WJ(a)};this.uq=function(a){l.cK(a)}}a.prototype.Rj=
function(a,b){var e=!1;a?(e=this.ih()?!0:!1,this.x_()):(this.Bk&&this.Bk(),this.CM(b),e=this.wM());return e};a.prototype.destroy=function(){for(var a=this.qc,b=this.qq(),e=0;e<b.length;e++){var f=b[e].style;this.yj?f.right="":f.left="";f.top=""}a.removeChild(this.H0);this.T0=this.S0=this.Xx=this.eo=this.Bk=this.Mt=this.zt=this.so=this.HJ=this.VW=this.kh=this.zn=this.qc=this.Al=this.ik=this.oi=this.jk=this.fj=this.uq=this.sq=this.MX=this.xk=this.Qq=this.H0=null};a.prototype.resizeTile=function(a,b){var e=
this.qc.querySelector(a);if(e){this.jk||(this.jk=[]);var f=this.jk;f.push(e);f.push(b);this.E_=!0;this.Fx()}};a.prototype.fpa=function(a,b){var e=this.qq();this.Xx&&this.Xx(e);var f=null;0<=b&&b<e.length&&(f=e[b]);this.qc.insertBefore(a,f);this.Fx()};a.prototype.nqa=function(b){if(b=this.qc.querySelector(b))this.oi||(this.oi=[]),this.oi.push(b),this.dM=!0,this.tj!==a.jS&&this.tj!==a.fA?this.Fx():this.dM=!1};a.prototype.Zoa=function(a){if(a=this.qc.querySelector(a))this.ik||(this.ik=[]),this.ik.push(a),
this.NX=!0,this.Fx()};a.prototype.Ypa=function(){this.E_||this.NX||this.dM||(this.Bk&&this.Bk(),this.CM(!1),this.wM())};a.prototype.Eg=function(){if(this.g1)return!1;this.laa||(this.H$=this.R$?!1:a.jha(a.bH[0],a.bH[1]),this.laa=!0);return this.H$};a.prototype.sE=function(){return null!=this.tj||null!=this.fj&&0<this.fj.length};a.prototype.gE=function(){this.g1=!0;this.bm(this.yM);this.bm(this.xM);this.bm(this.vM);this.bm(this.xD);this.bm(this.AM);this.bm(this.BM);this.bm(this.zM);this.kh(this.Qq,
this.tM);this.kh(this.Qq,this.sM);a.je(this.qc,"transitionend",this.xk);a.je(this.qc,"webkitTransitionEnd",this.xk);for(var b=this.qq(),c=0;c<b.length;c++){var e=b[c];e.DA&&delete e.DA;a.je(e,"transitionend",this.sq);a.je(e,"webkitTransitionEnd",this.sq);a.je(e,"transitionend",this.uq);a.je(e,"webkitTransitionEnd",this.uq)}this.At?(clearTimeout(this.At),this.At=null,this.WJ(null)):this.du?(clearTimeout(this.du),this.du=null,this.cM()):this.tj===a.fA||null!=this.fj&&0<this.fj.length?this.vq(null):
this.tj===a.kS&&this.cK(null);this.g1=!1};a.Ida=function(b){var c=a.Dw(b);return{Wf:b.offsetWidth+(a.og(c.marginLeft)+a.og(c.marginRight)),ph:b.offsetHeight+(a.og(c.marginTop)+a.og(c.marginBottom))}};a.Hda=function(b){b=a.Dw(b);return{paddingLeft:a.og(b.paddingLeft),paddingRight:a.og(b.paddingRight),paddingTop:a.og(b.paddingTop),paddingBottom:a.og(b.paddingBottom),borderLeftWidth:a.og(b.borderLeftWidth),borderRightWidth:a.og(b.borderRightWidth),borderTopWidth:a.og(b.borderTopWidth),borderBottomWidth:a.og(b.borderBottomWidth)}};
a.Dw=function(a){var b=a.ownerDocument.defaultView,e=null;return e=b?b.getComputedStyle(a,null):a.currentStyle};a.og=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};a.vf=function(a,b,e){a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent&&a.attachEvent("on"+b,e)};a.je=function(a,b,e){a.removeEventListener?a.removeEventListener(b,e,!1):a.detachEvent&&a.detachEvent("on"+b,e)};a.nT=function(a,b){if(a)for(var e=0;e<a.length;e++)if(a[e]==b)return e;return-1};a.jha=
function(a,b){var e=["gecko",16,"trident",6,"webkit",533.1],f=e.length;if(0==f%2)for(var h=0;h<=f-2;h+=2)if(a==e[h]){if(b>=e[1+h])return!0;break}return!1};a.gda=function(){var b=a.Ai,c=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(c="trident",e=b(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=b(f,/msie (\d+\.\d+);/),-1==e&&(e=b(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(c="webkit",
e=b(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&(c="gecko",e=b(f,/rv:(\d+[.]\d+)/));return[c,e]};a.Ai=function(a,b){var e=a.match(b);return e&&(e=e[1])?parseFloat(e):-1};a.Uaa=function(a,b){return a.UE>b.UE?1:a.UE<b.UE?-1:a.TE>b.TE?1:a.TE<b.TE?-1:0};a.prototype.Fx=function(){this.lC||(this.tj?this.lL||(this.lL=!0):this.lC=setTimeout(this.MX,0))};a.prototype.qq=function(){for(var a=this.qc.querySelectorAll(this.bma),b=[],e=0;e<a.length;e++){var f=a[e],h=f.style;0<f.offsetWidth&&0<f.offsetHeight&&
"hidden"!=h.visibility&&b.push(f)}return b};a.prototype.wM=function(){var b=this.fj,c=this.ih();if(this.jk){var e=this.jk;c||(c=[]);for(var f=0;f<e.length;f+=2){var h=e[f];0>a.nT(c,h)&&c.push(h)}}e=!1;if(!c||1>c.length){if(!b||1>b.length)this.fj=null,this.vq(null),e=!0}else this.fj=c;b=null!=c&&0<c.length;this.Eg()||e||this.vq(null);return b};a.prototype.ih=function(){var b=this.qc,c=this.qq();this.Xx&&this.Xx(c);var e=this.GH=null;this.Fn=0;this.na=1;this.St=null;var f=[],h=[],k=[],l=this.yj,m=a.Hda(b),
n=0,p=[];this.mT=p;for(var r=0;r<c.length;r++){var s=c[r],q=this.HJ(s);(e=s.DA)&&delete s.DA;if(!this.GH){var t=q;e&&(t=document.createElement("div"),t.className=e,t=this.HJ(t));this.GH=this.maa(s,t)}e=this.GH;this.St||(this.Fn=Math.max(Math.floor((b.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.Wf),1),this.Gga(this.Fn,this.na),n=this.Fn);q.colSpan>n&&(n=q.colSpan);q.colSpan>this.Fn&&(q.colSpan=this.Fn);for(var w=!1,t=0;t<this.na;t++){for(var x=0;x<this.Fn;x++)if(this.ada(x,
t,q)){var w=s.style,v={top:w.top};l?v.right=w.right:v.left=w.left;h.push(v);this.cL(s,x,t,q,e,m);l&&k.push(x);w=!0;p.push({TE:x,UE:t,tile:s});break}if(w)break;t===this.na-1&&this.XS()}}e&&(b=this.Qq.style,b.width=n*e.Wf+"px",b.height=this.na*e.ph+"px");for(r=0;r<c.length;r++)s=c[r],w=s.style,v=h[r],""!=v.top&&(l&&parseInt(w.right,10)!==parseInt(v.right,10)||!l&&parseInt(w.left,10)!==parseInt(v.left,10)||parseInt(w.top,10)!==parseInt(v.top,10))&&f.push(s);1>f.length&&(f=null);return f};a.prototype.x_=
function(){var b=this.mT;this.mT=null;for(var b=b.sort(a.Uaa),c=this.qq(),e=0;e<c.length;e++){var f=c[e],h=b[e].tile;f!=h&&(this.T0(h),f.parentNode.insertBefore(h,f),this.S0(h),f=a.nT(c,h),f>e&&(c.splice(f,1),c.splice(e,0,h)))}};a.prototype.Gga=function(a,b){for(var e=this.St=[],f=0;f<b;f++){var h=[];e.push(h);for(var k=0;k<a;k++)h[k]=!1}};a.prototype.XS=function(){this.na++;var a=[];this.St.push(a);for(var b=0;b<this.Fn;b++)a[b]=!1};a.prototype.ada=function(a,b,e){var f=e.colSpan;e=e.rowSpan;for(var h=
b;h<b+e;h++){h>=this.na&&this.XS();for(var k=a;k<a+f;k++)if(k>=this.Fn||this.St[h][k])return!1}return!0};a.prototype.cL=function(a,b,e,f,h,k){var l=f.colSpan;f=f.rowSpan;for(var m=this.St,n=e;n<e+f;n++)for(var p=b;p<b+l;p++)m[n][p]=!0;a=a.style;a.top=k.paddingTop+e*h.ph+"px";this.yj?a.right=k.paddingRight+b*h.Wf+"px":a.left=k.paddingLeft+b*h.Wf+"px"};a.prototype.t$=function(a){for(var b=this.qq(),e=0;e<b.length;e++)this.zn(b[e],a)};a.prototype.bm=function(a){for(var b=this.qq(),e=0;e<b.length;e++)this.kh(b[e],
a)};a.prototype.CM=function(b){this.OY||(this.y_=b,this.Eg()&&(this.t$(b?this.xM:this.yM),this.zn(this.Qq,b?this.sM:this.tM),a.vf(this.qc,"transitionend",this.xk),a.vf(this.qc,"webkitTransitionEnd",this.xk)),this.OY=!0)};a.prototype.vq=function(b){var c=!0;if(this.fj){var e=this.fj;if(b){var f=b.target;for(b=0;b<e.length;b++)if(f===e[b]){e.splice(b,1);break}}else this.Eg()||(e=this.fj=[]);0<e.length&&(c=!1)}if(c){if(this.jk&&(c=this.jk,this.jk=null,this.Eg()))for(b=0;b<c.length;b+=2)this.kh(c[b],
this.zM);this.y_?(this.Eg()&&(this.bm(this.xM),this.kh(this.Qq,this.sM)),this.y_=!1):this.Eg()&&(this.bm(this.yM),this.kh(this.Qq,this.tM));this.Eg()&&(a.je(this.qc,"transitionend",this.xk),a.je(this.qc,"webkitTransitionEnd",this.xk));this.dM=this.NX=this.E_=this.OY=!1;this.x_();this.Mt&&this.Mt();if(this.tj===a.fA)if(this.Eg()){var h=this;this.du=setTimeout(function(){h.cM()},0)}else this.cM();else this.tj||this.eo&&this.eo()}};a.prototype.maa=function(b,c){var e=a.Ida(b);return{Wf:e.Wf/c.colSpan,
ph:e.ph/c.rowSpan}};a.prototype.oga=function(){this.lC&&(clearTimeout(this.lC),this.lC=null);this.Bk&&this.Bk();this.tj=a.jS;if(this.ik&&this.Eg()){for(var b=this.ik,c=0;c<b.length;c++){var e=b[c];a.vf(e,"transitionend",this.sq);a.vf(e,"webkitTransitionEnd",this.sq);this.zn(e,this.vM)}var f=this;this.At=setTimeout(function(){for(var a=0;a<b.length;a++){var c=b[a];f.kh(c,f.vM);f.zn(c,f.xD)}},0)}else this.WJ(null)};a.prototype.WJ=function(b){this.At&&(clearTimeout(this.At),this.At=null);if(b){b.preventDefault();
b.stopPropagation();b=b.target;this.kh(b,this.xD);a.je(b,"transitionend",this.sq);a.je(b,"webkitTransitionEnd",this.sq);var c=this.ik;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===b){c.splice(e,1);this.Al||(this.Al=[]);var h=this.Al;h.push(b);break}}1>c.length&&(this.ik=null)}}else if(!this.Eg()&&(c=this.ik)){for(e=0;e<c.length;e++)f=c[e],this.Al||(this.Al=[]),h=this.Al,h.push(f);this.ik=null}if(!this.ik){if(this.Al){h=this.Al;for(e=0;e<h.length;e++)b=h[e],this.Eg()&&this.kh(b,this.xD),c=b.style,
this.yj?c.right="":c.left="",c.top="",this.zt&&this.zt(b);this.Al=null}this.tj=a.fA;this.CM(!1);if(this.jk)for(h=this.jk,e=0;e<h.length;e+=2)b=h[e],c=h[e+1],f=this.VW(b),this.kh(b,f),this.zn(b,c),this.Eg()&&(this.zn(b,this.zM),b.DA=f);this.wM()}};a.prototype.cM=function(){this.du&&(clearTimeout(this.du),this.du=null);this.tj=a.kS;if(this.oi&&this.Eg())for(var b=this.oi,c=0;c<b.length;c++){var e=b[c];a.vf(e,"transitionend",this.uq);a.vf(e,"webkitTransitionEnd",this.uq);this.zn(e,this.BM);this.kh(e,
this.AM)}else{if(this.oi)for(b=this.oi,c=0;c<b.length;c++)e=b[c],this.kh(e,this.AM);this.cK(null)}};a.prototype.cK=function(b){if(b){b.preventDefault();b.stopPropagation();b=b.target;this.kh(b,this.BM);a.je(b,"transitionend",this.uq);a.je(b,"webkitTransitionEnd",this.uq);var c=this.oi;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===b){c.splice(e,1);this.so&&this.so(b);break}}1>c.length&&(this.oi=null)}}else if(!this.Eg()&&(c=this.oi)){for(e=0;e<c.length;e++)f=c[e],this.so&&this.so(f);this.oi=
null}this.oi||(this.tj=null,this.eo&&this.eo(),this.lL&&(this.lL=!1,this.Fx()))};a.jS=1;a.fA=2;a.kS=3;(function(){function d(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==p&&c.display!==r||(b=!1)}if(a&&1===a.nodeType&&b)return a}return null}function c(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===p||d.display===r))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.rc<a.rc?1:a.rc<b.rc?-1:0}function g(a){a&&a.sort(e);return a}function h(a){var b=
null;a=f(a);a.hasClass("oj-masonrylayout-tile-1x1")?b={colSpan:1,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-2x1")?b={colSpan:2,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-3x1")?b={colSpan:3,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-1x2")?b={colSpan:1,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-1x3")?b={colSpan:1,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-2x2")?b={colSpan:2,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-2x3")?b={colSpan:2,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-3x2")&&
(b={colSpan:3,rowSpan:2});return b}function k(a){var b=null;a=f(a);a.hasClass("oj-masonrylayout-tile-1x1")?b="oj-masonrylayout-tile-1x1":a.hasClass("oj-masonrylayout-tile-2x1")?b="oj-masonrylayout-tile-2x1":a.hasClass("oj-masonrylayout-tile-3x1")?b="oj-masonrylayout-tile-3x1":a.hasClass("oj-masonrylayout-tile-1x2")?b="oj-masonrylayout-tile-1x2":a.hasClass("oj-masonrylayout-tile-1x3")?b="oj-masonrylayout-tile-1x3":a.hasClass("oj-masonrylayout-tile-2x2")?b="oj-masonrylayout-tile-2x2":a.hasClass("oj-masonrylayout-tile-2x3")?
b="oj-masonrylayout-tile-2x3":a.hasClass("oj-masonrylayout-tile-3x2")&&(b="oj-masonrylayout-tile-3x2");return b}function l(a,b){f(a).removeClass(b)}function m(a,b){f(a).addClass(b)}b.ya("oj.ojMasonryLayout",f.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");
this.options.disabled&&b.r.warn(v);this.Cr=this.eventNamespace+"ReorderHandle";this.pa={};this.pa.uh=!1;this.pa.Me=!1;this.pa.zP=!1;this.pa.Um=!1;this.pa.jp=!1;this.Xn();this.Zv();this.Aa(!0)},refresh:function(){this._super();var a="rtl"===this.dc()!==this.yf;a&&this.UU();this.Aa(a)},vl:function(){this._super();this.Wc&&this.Aa(this.Wc[0])},rn:function(){this._super();this.Wc&&this.Aa(this.Wc[0])},rf:function(a,b,c){this.Pia(b);this.tf(b,c,{launcher:f(b.target).closest(":tabbable")})},Aa:function(c){if(this.fw()){this.Wc=
null;this.yf="rtl"===this.dc();this.Cn=b.v.Rd();var d=this.element,e=this.options;if(c){var f=this;this.so=function(a){f.Ila(a)};this.zt=function(a){f.nga(a)};this.Mt=function(){f.Eha()};this.Bk=function(){f.Dha()};this.eo=function(){f.Cha()};if(!this.Df){var q={};q.N5=w;var t={Q5:"oj-masonrylayout-transition-resize-to",P5:"oj-masonrylayout-transition-resize-to-fast",U5:"oj-masonrylayout-tile-transition-move-to",T5:"oj-masonrylayout-tile-transition-move-to-fast",R5:"oj-masonrylayout-tile-transition-hide-from",
S5:"oj-masonrylayout-tile-transition-hide-to"};t.W5=x;t.X5="oj-masonrylayout-tile-transition-show-to";t.V5="oj-masonrylayout-tile-transition-resize-to";var n={};n.G1=m;n.d5=l;n.u3=k;n.D3=h;n.z5=this.so;n.P3=this.zt;n.m4=this.Mt;n.l4=this.Bk;n.k4=this.eo;n.B5=g;n.df=b.Components.df;n.Lg=b.Components.Lg;this.Bka();this.Df=new a(d[0],this.yf,"enabled"===b.ba.FN(),q,t,n)}this.pX=function(a){f.pfa(a)};this.mX=function(a){f.lfa(a)};this.oX=function(a){f.ofa(a)};this.nX=function(a){f.mfa(a)};this.kX=function(a){f.kfa(a)};
this.qX=function(a){f.qfa(a)};e.reorderHandle&&this.w0()}else e=d.children(),this.kM(e),this.aM(e),this.Baa();this.Df.Rj(c);c&&(this.fh=function(){f.Ye()},b.v.Oh(d[0],this.fh))}else d=!1,this.Wc&&(d=this.Wc[0]),this.Wc=[c||d]},_destroy:function(){this.Vp();var a=this.element;b.v.Pi(a[0],this.fh);this.fh=null;this.yka();for(var c=this.vk(),d=c.length,e=0;e<d;e++)delete c[e].rc;this.UU();a.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.e1();this.Ms=this.eo=this.Bk=this.Mt=
this.zt=this.so=this.qX=this.kX=this.nX=this.oX=this.mX=this.pX=null;this._super()},_setOption:function(a,c,d){var e=!1;switch(a){case "reorderHandle":this.e1();e=!0;break;case "disabled":b.r.warn(v);break;case "contextMenu":b.v.Rd()||(this.Vp(),c&&this.Xn(c))}this._super(a,c,d);e&&c&&this.w0()},resizeTile:function(a,b){var c=this.Df;c.sE()&&c.gE();var d=f(a),e=d[0],g=k(e);if(b==g)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");
!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:g,sizeStyleClass:b})&&(this.aw||(this.aw=[]),this.aw.push(e,g,b),c.resizeTile(a,b))},insertTile:function(a,c){var d=this.Df;d.sE()&&d.gE();isNaN(c)&&(c=-1);var e=f(a),g=e[0];!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(g.LY=c,d.Eg()&&e.addClass(x),e=g.style,e.top="-1px",this.yf?e.right="-1px":e.left="-1px",this.Yn(g,c),d.fpa(g,c),b.Components.df(g),this.Ms||(this.Ms=[]),this.Ms.push(a))},removeTile:function(a){var c=
this.Df;c.sE()&&c.gE();var d=f(a),e=d[0];if(b.sd.UD(e)){var g=this.vk(!0),e=g.indexOf(e);0<e&&(this.mI=g[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&c.Zoa(a)},Ye:function(){this.ew||this.QX||this.Df.Ypa()},Ila:function(a){var b=f(a),c=a.LY;delete a.LY;this.options.reorderHandle&&this.aM(b);this._trigger("insert",null,{tile:b,index:c})},nga:function(a){var c=f(a);this.options.reorderHandle&&this.kM(c);b.Components.Lg(a);a.parentNode.removeChild(a);this.VC(a);this._trigger("remove",null,
{tile:c})},Eha:function(){if(this.Ms){for(var a=this.Df,b=this.Ms,c=0;c<b.length;c++)a.nqa(b[c]);this.Ms=null}if(this.aw){a=this.aw;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:f(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this._trigger("resize",null,b)}this.aw=null}this.ew&&(this.GA?this.nfa():this.iH&&this.lX())},Dha:function(){this.QX=!0;this.AC=null;var a=document.activeElement;a&&b.v.Yk(this.element[0],a)&&(this.AC=a)},Cha:function(){this.QX=!1;var a=this.element[0];if(this.AC){var c=
this.AC;this.AC=null;if(this.mI){if(c=this.mI,this.mI=null,c&&b.v.Yk(a,c)){var a=this.vk(a,!0),d=a.indexOf(c);0<=d&&d<a.length-1?b.sd.CN(a[d+1]):b.sd.CN(c)}}else b.v.Yk(a,c)?b.sd.By(c):b.sd.CN(a)}},UU:function(){var a=this.Df;a&&a.destroy();this.Df=null},fw:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);return c},vk:function(a){for(var b=this.element.children(w),
c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.zd){var g=f.style;g.visibility!==p&&g.display!==r&&d.push(f)}}return d},Bka:function(){var a=this.vk();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.rc||(c.rc=b+1)}},Baa:function(){var a=this.vk();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.rc||this.Yn(c,b)}},yka:function(){var a=this.vk(),c=this.vk();g(c);for(var d=0;d<a.length;d++){var e=a[d],f=c[d];e!=f&&(b.Components.Lg(f),e.parentNode.insertBefore(f,e),b.Components.df(f),e=a.indexOf(f),
e>d&&(a.splice(e,1),a.splice(d,0,f)))}},Yn:function(a,b){var c=this.vk();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.rc&&e.rc>=b+1&&e.rc++}a.rc=b+1},VC:function(a){if(a.rc){var b=this.vk();if(b)for(var c=0;c<b.length;c++){var d=b[c];d.rc&&d.rc>a.rc&&d.rc--}delete a.rc}},Xn:function(a){var b=null,c=null;a||this.options.contextMenu||(b=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=f.type(b);if("function"==
c){try{b=b()}catch(d){b=null}c=f.type(b)}if("string"===c){if(b=f(b)){b.css("display",r);c=this.pa;if(!c)return;c.Me=b;c.uh=!0}this.pa.uh&&a&&this.Zv()}}},Zv:function(){if(this.pa&&this.pa.uh&&this.options.reorderHandle){var a=this.pa.Me,b=this;a.on("ojselect",f.proxy(this.qj,this));var c=!1;a.find("[data-oj-command]").each(function(){if(0===f(this).children("a").length){var a=f(this).attr("data-oj-command").slice(17);f(this).replaceWith(b.qi(a));f(this).addClass("oj-menu-item");c=!0}});c&&a.ojMenu("refresh");
this.pa.zP=a.find("#"+u);this.pa.Um=a.find("#"+y);this.pa.jp=a.find("#"+B)}},Vp:function(){var a=this.pa;a&&a.uh&&(a.uh=!1,a.Me.off("ojselect"),a.Me=null)},Pia:function(a){a=c(a.originalEvent.target,this.element[0]);this.pa.tile=a;if(this.pa.uh){var b=this.pa.YD,e=!1,f=this.pa.zP;if(f){var g=f.hasClass(q),h=!1;b&&a===b&&(h=!0);h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),e=!0)}if(f=this.pa.Um)g=f.hasClass(q),h=!1,b&&a!==b&&a!==d(b)||(h=!0),h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),
e=!0);if(f=this.pa.jp)g=f.hasClass(q),h=!1,b&&b!==a&&b!==d(a)||(h=!0),h&&!g?(f.addClass(q),e=!0):!h&&g&&(f.removeClass(q),e=!0);e&&this.pa.Me.ojMenu("refresh")}},qi:function(a){var b=L[a];a=F[a];var c=f('\x3ca href\x3d"#"\x3e\x3c/a\x3e');c.text(this.A(a));c.wrap("\x3cli id\x3d"+b+"\x3e\x3c/li\x3e");return c.parent()},Tha:function(a){a&&(this.pa.YD=a)},aZ:function(a,b){if(a&&this.pa.YD){var c=this.pa.YD;this.pa.YD=!1;this.oca(c,a,b)}},oca:function(a,b,c){var e=a.rc-1,g=f(a);if(!1!==this._trigger("beforeReorder",
null,{tile:g,fromIndex:e})){this.VC(a);var h=b.rc-1;c||h++;var k=this.element[0];c||(b=d(b));this.Yn(a,h);k.insertBefore(a,b);this.Df.Rj(!0);this._trigger("reorder",null,{tile:g,fromIndex:e,toIndex:h})}},qj:function(a,b){var c=b?b.item.attr("id"):void 0;c===u?this.Tha(this.pa.tile):c===y?this.aZ(this.pa.tile,!0):c===B&&this.aZ(this.pa.tile,!1)},cX:function(a){var b=this.vk(!0);g(b);for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},w0:function(){var a=this.element,b=a.children();this.aM(b);
a.on("dragstart"+this.Cr,this.pX).on("dragenter"+this.Cr,this.mX).on("dragover"+this.Cr,this.oX).on("dragleave"+this.Cr,this.nX).on("dragend"+this.Cr,this.kX).on("drop"+this.Cr,this.qX)},aM:function(a){var b=this.options;a.filter(b.reorderHandle).attr(s,"true").addClass(t);a.find(b.reorderHandle).attr(s,"true").addClass(t)},e1:function(){var a=this.element,b=a.children();this.kM(b);a.off(this.Cr)},kM:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(s).removeClass(t);a.find(b.reorderHandle).removeAttr(s).removeClass(t)},
pfa:function(a){if(this.options.reorderHandle&&!this.ew){var b=c(a.target,this.element[0]);if(b){var d=this.cX(b);b.DK=d;d={tile:f(b),fromIndex:d};!1!==this._trigger("beforeReorder",null,d)&&(a=a.originalEvent,this.xI(b,a.pageX,a.pageY,a.dataTransfer))}}},lfa:function(a){a=a.originalEvent;var c=a.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!b.v.Yk(d,c):this.iV&&(e=(c=document.elementFromPoint(a.clientX,a.clientY))&&(c==d||b.v.Yk(d,c)));e&&((this.iV=!1,this.Ln)?this.zd&&(f(this.zd).css("display",
""),this.Df.Rj(!1,!0)):a.dataTransfer.dropEffect="none")},ofa:function(a){var b=a.originalEvent;b.dataTransfer.dropEffect="move";this.vca(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},mfa:function(a){var c=a.originalEvent,d=c.relatedTarget;a=this.element[0];var e=!1;e=d?a!=d&&!b.v.Yk(a,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=a&&!b.v.Yk(a,c);e&&(this.iV=!0,this.zd&&(f(this.zd).css("display",r),this.Df.Rj(!1,!0)))},ST:function(){if(this.jB){clearTimeout(this.jB);this.jB=
null;var a=this.Ln;a&&f(a).removeClass("oj-drag")}},kfa:function(){this.ST();if(!this.kH){var a=this.Ln;if(a&&this.zd){var c=this.zd;b.v.Yk(this.element[0],a)&&(f(c).css("display",""),this.VC(c),c.parentNode.removeChild(c),f(a).css("display",""),this.Yn(a,a.rc-1),this.Df.Rj(!1,!0));delete a.DK}this.zd=this.Ln=null;this.IA=this.GA=!1;this.wI=null;this.ew=this.iH=!1}},qfa:function(a){var b=this.Df;b.sE()&&b.gE();this.ST();b=a.originalEvent;this.Dca(this.Ln,b.pageX,b.pageY);a.stopPropagation();return!1},
xI:function(a,c,d,e){this.ew=!0;this.jH=this.IA=this.kH=!1;this.Ln=a;var g=this.element[0],h=k(a),q=this.zd=document.createElement("div");q.rc=a.rc;q.className=h+" oj-drop";var h=q.style,l=a.style;h.top=l.top;this.yf?h.right=l.right:h.left=l.left;h=f(a).offset();g.insertBefore(q,a);this.wI=c={left:c-h.left,top:d-h.top};f(a).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",a.outerHTML);e.setDragImage(a,c.left,c.top);var t=this;this.jB=setTimeout(function(){t.jH=!0;l.display=r;f(a).removeClass("oj-drag");
t.jB=null;b.Components.fp(a)},0)},vca:function(a,b,e){this.IA=!0;if(this.jH&&!this.GA){var g=this.element[0];b=document.elementFromPoint(b,e);if((b=c(b,g))&&b!==this.zd&&b!==this.Ln){var h=f(g).offset();e=d(this.zd);a=a-h.left>=b.offsetLeft+.5*b.offsetWidth;this.VC(this.zd);a&&!this.yf||!a&&this.yf?(a=d(b))?(this.Yn(this.zd,a.rc-1),g.insertBefore(this.zd,a)):(this.Yn(this.zd,b.rc),g.appendChild(this.zd)):(this.Yn(this.zd,b.rc-1),g.insertBefore(this.zd,b));e!==d(this.zd)&&(this.GA=this.Df.Rj(!1,!0))}}},
nfa:function(){this.GA=!1},Dca:function(a,c,d){this.kH=!0;var e=this.element[0],g=this.zd;this.zd=null;b.Components.Lg(a);e.replaceChild(a,g);b.Components.df(a);a.rc=g.rc;g=a.style;g.display="";b.Components.Pm(a);var h=f(e).offset(),k=this.wI;g.top=d-k.top-h.top+n;c=c-k.left-h.left;this.yf?(g.right=e.offsetWidth-(c+f(a).outerWidth(!0))+n,g.left=""):g.left=c+n;this.wI=null;this.IA?this.iH=this.Df.Rj(!1,!0):this.lX()},lX:function(){this.jH=this.IA=this.kH=this.ew=this.iH=!1;var a=this.Ln;this.Ln=null;
var b=a.DK;delete a.DK;var c=this.cX(a),a={tile:f(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var n="px",p="hidden",r="none",s="draggable",q="oj-disabled",t="oj-draggable",w=".oj-masonrylayout-tile-1x1, .oj-masonrylayout-tile-1x2, .oj-masonrylayout-tile-1x3, .oj-masonrylayout-tile-2x1, .oj-masonrylayout-tile-2x2, .oj-masonrylayout-tile-2x3, .oj-masonrylayout-tile-3x1, .oj-masonrylayout-tile-3x2",
x="oj-masonrylayout-tile-transition-show-from",v="JET MasonryLayout: 'disabled' option not supported",u="ojmasonrylayoutcut",y="ojmasonrylayoutpastebefore",B="ojmasonrylayoutpasteafter",L={cut:u,"paste-before":y,"paste-after":B},F={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"}})()});